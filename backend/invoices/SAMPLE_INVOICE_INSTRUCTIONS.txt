â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘        SAMPLE INVOICE FILES - SETUP INSTRUCTIONS                    â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

This folder contains invoice PDF files that can be downloaded via chatbot.

ğŸ“ HOW TO ADD INVOICE FILES:

1. Create or export your invoice as PDF
2. Name it following this pattern: inv_[invoice_id].pdf
   
   Examples:
   âœ“ inv_2025_001.pdf
   âœ“ inv_2025_002.pdf
   âœ“ inv_20250001.pdf
   âœ“ inv_FR_001.pdf

3. Place the PDF file in this folder: /backend/invoices/

4. Make sure your bookings database has matching invoice_id values:
   Example: booking with invoice_id='2025_001' â†’ inv_2025_001.pdf


ğŸ§ª TESTING WITH SAMPLE FILES:

Option 1: Use Real PDFs
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
- Generate invoices from your system
- Save as PDF
- Place in /backend/invoices/ folder
- Update database with invoice_id values
- Test in chatbot

Option 2: Quick Test (No Real PDFs)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
You can create empty/dummy PDF files for testing:

PowerShell Command:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
New-Item -Path "inv_2025_001.pdf" -ItemType File
New-Item -Path "inv_2025_002.pdf" -ItemType File

Then test download - system doesn't care about PDF content for this test!


ğŸ“‹ DATABASE SETUP:

Before testing, ensure bookings have invoice_id:

```sql
-- Check current data
SELECT consignment_number, invoice_id FROM bookings LIMIT 5;

-- Add invoice IDs (if column doesn't exist, add it first)
ALTER TABLE bookings ADD COLUMN invoice_id VARCHAR(255) NULL;

-- Update with sample values
UPDATE bookings 
SET invoice_id = '2025_001' 
WHERE consignment_number = 'CN20240001';

UPDATE bookings 
SET invoice_id = '2025_002' 
WHERE consignment_number LIKE 'CN%' LIMIT 1 OFFSET 1;
```


ğŸš€ QUICK TEST:

1. Backend running? Start with: npm start
2. Frontend running? Start with: npm run dev (in frontend folder)
3. Place test PDF here: inv_2025_001.pdf
4. Update database with invoice_id='2025_001' for one booking
5. Open chatbot and enter that consignment number
6. Click "Download Invoice" button
7. File should download!


ğŸ“ FOLDER STRUCTURE:

backend/
â”œâ”€â”€ invoices/                    â† Files go here
â”‚   â”œâ”€â”€ inv_2025_001.pdf
â”‚   â”œâ”€â”€ inv_2025_002.pdf
â”‚   â””â”€â”€ SAMPLE_INVOICE_INSTRUCTIONS.txt (this file)
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ controllers/
â”‚   â”‚   â”œâ”€â”€ invoiceController.js (updated)
â”‚   â”‚   â””â”€â”€ chatbotController.js (updated)
â”‚   â””â”€â”€ routes/
â”‚       â””â”€â”€ invoiceRoutes.js (updated)
â””â”€â”€ ...


ğŸ”— FILE NAMING CONVENTION:

Pattern: inv_[invoice_id].pdf

What is invoice_id?
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
- Value from bookings.invoice_id column
- Can be: 2025_001, 20250001, FR_INV_001, etc.
- Must match EXACTLY

Example Mapping:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Database:
  bookings.consignment_number = 'CN20240001'
  bookings.invoice_id = '2025_001'

File needed:
  /backend/invoices/inv_2025_001.pdf


âœ… VERIFICATION CHECKLIST:

Before testing, verify:
- [ ] /backend/invoices/ folder exists
- [ ] At least one PDF file in folder
- [ ] File named: inv_[something].pdf
- [ ] Database bookings.invoice_id column exists
- [ ] Booking record has invoice_id value
- [ ] invoice_id matches PDF filename
- [ ] Backend running on port 5000
- [ ] Frontend running
- [ ] Logged into application


ğŸ› IF DOWNLOAD FAILS:

Check these in order:
1. Is backend running? (port 5000)
2. Does file exist? (check folder)
3. Filename correct? (inv_[id].pdf)
4. Database has invoice_id? (query the table)
5. invoice_id matches file? (must be exact)
6. Authentication token valid? (try logging out/in)


ğŸ’¡ GENERATING REAL INVOICES:

Option A: From Admin Panel
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1. Go to Generate Invoice page
2. Create invoice
3. Download/Export as PDF
4. Save as: inv_[invoice_id].pdf
5. Move to /backend/invoices/

Option B: Programmatically (Future)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Backend can auto-generate PDFs using:
- Node libraries: pdfkit, puppeteer, wkhtmltopdf
- Will be added in future updates


ğŸ“ SUPPORT:

If you need help:
1. Check all files exist in correct locations
2. Verify database values
3. Check browser console (F12) for errors
4. Check backend logs in terminal
5. Restart both frontend and backend


ğŸ‰ YOU'RE ALL SET!

Place your invoice PDFs in this folder and test the download feature!
Questions? Check the full guide: CHATBOT_INVOICE_DOWNLOAD_GUIDE.md

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Created: October 24, 2025
Status: âœ… Ready to Use
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€